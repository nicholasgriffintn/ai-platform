{
	"name": "assistant",
	"main": "src/index.ts",
	"compatibility_date": "2025-05-05",
	"compatibility_flags": [
		"nodejs_compat",
		"nodejs_compat_populate_process_env"
	],
	"workers_dev": false,
	"dev": {
		"port": 8787
	},
	"env": {
    "dev": {
      "triggers": {
        "crons": [
          "0 * * * *"
        ]
      }
    }
  },
	"vars": {
		"ACCOUNT_ID": "REPLACE_ME",
		"APP_BASE_URL": "REPLACE_ME",
		"SES_EMAIL_FROM": "REPLACE_ME",
		"PUBLIC_ASSETS_URL": "REPLACE_ME",
		"PUBLIC_ASSETS_BUCKET": "assistant-assets",
		"REQUIRE_CAPTCHA_SECRET_KEY": "false",
		"ALWAYS_ENABLED_PROVIDERS": "workers-ai,mistral,deepseek,google-ai-studio",
		"LOG_LEVEL": "warn",
		"ENV": "production"
	},
	"ai": {
		"binding": "AI",
		"remote": true
	},
	"vectorize": [
		{
			"binding": "VECTOR_DB",
			"index_name": "polychat",
			"remote": true
		}
	],
	"observability": {
		"enabled": true,
		"head_sampling_rate": 0.1,
		"logs": {
			"enabled": true,
			"invocation_logs": false
		}
	},
	"analytics_engine_datasets": [
		{
			"binding": "ANALYTICS",
			"dataset": "assistant_analytics"
		}
	],
	"r2_buckets": [
		{
			"binding": "ASSETS_BUCKET",
			"bucket_name": "assistant-assets",
			"preview_bucket_name": "assistant-assets",
			"remote": true
		}
	],
	"d1_databases": [
		{
			"binding": "DB",
			"database_name": "personal-assistant",
			"database_id": "REPLACE_ME",
			"preview_database_id": "REPLACE_ME"
		},
		{
			"binding": "PREVIEW_DB",
			"database_name": "personal-assistant-preview",
			"database_id": "REPLACE_ME"
		}
	],
	"kv_namespaces": [
		{
			"binding": "CACHE",
			"id": "REPLACE_ME",
			"preview_id": "REPLACE_ME"
		}
	],
	"queues": {
		"producers": [{ "binding": "TASK_QUEUE", "queue": "polychat-task-queue" }],
		"consumers": [
			{
				"queue": "polychat-task-queue",
				"max_batch_size": 10,
				"dead_letter_queue": "polychat-task-queue-dlq"
			}
		]
	},
	"unsafe": {
		"bindings": [
			{
				"name": "FREE_RATE_LIMITER",
				"type": "ratelimit",
				"namespace_id": "1001",
				"simple": {
					"limit": 60,
					"period": 60
				}
			},
			{
				"name": "PRO_RATE_LIMITER",
				"type": "ratelimit",
				"namespace_id": "1002",
				"simple": {
					"limit": 120,
					"period": 60
				}
			}
		]
	}
}
